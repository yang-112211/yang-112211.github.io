var $ = jQuery;

$(document).ready(function () {

    // Initialize carousels
    var $circuitCarousel = $('.carousel--circuits').flickity({
        initialIndex: 0,
        contain: true,
        prevNextButtons: false,
        pageDots: false,
        freeScroll: true,
        freeScrollFriction: 0.03,
        selectedAttraction: 0.01,
        friction: 0.15
    });

    var flkty = $circuitCarousel.data('flickity');

    $circuitCarousel.on('staticClick.flickity', function (event, pointer, cellElement, cellIndex) {
        // dismiss if cell was not clicked
        if (!cellElement) {
            return;
        }
        // go to next cell
        $circuitCarousel.flickity('select', cellIndex);
    });

    $('.carousel-gallery--bg').flickity({
        cellAlign: 'left',
        contain: true,
        prevNextButtons: false,
        bgLazyLoad: true,
        wrapAround: true
    });

    $('.carousel-gallery--circuit-node').flickity({
        cellAlign: 'left',
        contain: true,
        prevNextButtons: true,
        lazyLoad: true,
        wrapAround: true,
        arrowShape: 'M88.7,45.7h-67l23-23.1a4.3,4.3,0,0,0,0-6.1,4.2,4.2,0,0,0-6,0L8.3,47l-.6.6c0,.1-.1.2-.2.3a.5.5,0,0,1-.2.4c0,.2-.1.3-.1.5s-.1.2-.1.4A1.9,1.9,0,0,0,7,50H7a1.9,1.9,0,0,0,.1.8c0,.2.1.3.1.4s.1.3.1.4l.3.5c0,.1.1.2.1.3l.6.7L38.7,83.5a4.2,4.2,0,0,0,6,0,4.3,4.3,0,0,0,0-6.1l-23-23.1h67a4.3,4.3,0,0,0,0-8.6Z'
    });

    $('.carousel-gallery--inline').flickity({
        imagesLoaded: true,
        cellAlign: 'left',
        contain: true,
        wrapAround: true,
        pageDots: false,
        arrowShape: 'M88.7,45.7h-67l23-23.1a4.3,4.3,0,0,0,0-6.1,4.2,4.2,0,0,0-6,0L8.3,47l-.6.6c0,.1-.1.2-.2.3a.5.5,0,0,1-.2.4c0,.2-.1.3-.1.5s-.1.2-.1.4A1.9,1.9,0,0,0,7,50H7a1.9,1.9,0,0,0,.1.8c0,.2.1.3.1.4s.1.3.1.4l.3.5c0,.1.1.2.1.3l.6.7L38.7,83.5a4.2,4.2,0,0,0,6,0,4.3,4.3,0,0,0,0-6.1l-23-23.1h67a4.3,4.3,0,0,0,0-8.6Z'
    });

    // Homepage leaderboard
    $('.carousel-banner--main').flickity({
        sync: '.carousel-banner--nav',
        lazyLoad: true,
        pageDots: false,
        prevNextButtons: false,
        bgLazyLoad: 1
    });

    $('.carousel-banner--nav').flickity({
        pageDots: false,
        arrowShape: 'M88.7,45.7h-67l23-23.1a4.3,4.3,0,0,0,0-6.1,4.2,4.2,0,0,0-6,0L8.3,47l-.6.6c0,.1-.1.2-.2.3a.5.5,0,0,1-.2.4c0,.2-.1.3-.1.5s-.1.2-.1.4A1.9,1.9,0,0,0,7,50H7a1.9,1.9,0,0,0,.1.8c0,.2.1.3.1.4s.1.3.1.4l.3.5c0,.1.1.2.1.3l.6.7L38.7,83.5a4.2,4.2,0,0,0,6,0,4.3,4.3,0,0,0,0-6.1l-23-23.1h67a4.3,4.3,0,0,0,0-8.6Z'
    });

    $('.carousel--accolades').flickity({
        cellAlign: 'left',
        contain: true,
        pageDots: false,
        arrowShape: 'M88.7,45.7h-67l23-23.1a4.3,4.3,0,0,0,0-6.1,4.2,4.2,0,0,0-6,0L8.3,47l-.6.6c0,.1-.1.2-.2.3a.5.5,0,0,1-.2.4c0,.2-.1.3-.1.5s-.1.2-.1.4A1.9,1.9,0,0,0,7,50H7a1.9,1.9,0,0,0,.1.8c0,.2.1.3.1.4s.1.3.1.4l.3.5c0,.1.1.2.1.3l.6.7L38.7,83.5a4.2,4.2,0,0,0,6,0,4.3,4.3,0,0,0,0-6.1l-23-23.1h67a4.3,4.3,0,0,0,0-8.6Z'
    });

});
